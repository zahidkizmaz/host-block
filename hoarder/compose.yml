services:
  web:
    image: ghcr.io/hoarder-app/hoarder:0.23.1@sha256:f8b0d12757f721a84e35baf6cb1deedb0bb01dac8a3ae60c3f74d54bab33521e
    restart: unless-stopped
    volumes:
      - ./data:/data
    ports:
      - 4000:3000
    env_file:
      - .env
    environment:
      MEILI_ADDR: http://meilisearch:7700
      BROWSER_WEB_URL: http://chrome:9222
      DATA_DIR: /data # DON'T CHANGE THIS
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "link"
      glance.name: Hoarder
      glance.icon: si:hoarder
      glance.url: https://link.quoll-ratio.ts.net
  chrome:
    image: docker.io/zenika/alpine-chrome:123@sha256:e38563d4475a3d791e986500a2e4125c9afd13798067138881cf770b1f6f3980
    restart: unless-stopped
    command:
      - --no-sandbox
      - --disable-gpu
      - --disable-dev-shm-usage
      - --remote-debugging-address=0.0.0.0
      - --remote-debugging-port=9222
      - --hide-scrollbars
  meilisearch:
    image: docker.io/getmeili/meilisearch:v1@sha256:bed3fb650e62da53145777204891159242f6ea4ce69e215b36223af4aa64a0ae
    restart: unless-stopped
    env_file:
      - .env
    environment:
      MEILI_NO_ANALYTICS: "true"
    volumes:
      - ./meilisearch:/meili_data
volumes:
  meilisearch:
  data:
